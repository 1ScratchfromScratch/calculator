<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Untitled Graph</title>
<link id="favicon" rel="icon" type="image/png" href="desmos.png">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.11.0/math.min.js"></script>

<style>
  * { box-sizing: border-box; }
  body {
    margin: 0;
    font-family: "Segoe UI", Arial, sans-serif;
    background: #fff;
    overflow: hidden;
  }

  header {
    height: 45px;
    background: #2c2c2c;
    color: #f0f0f0;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 10px;
  }
  header .left { display: flex; align-items: center; gap: 10px; }
  header .left h1 { font-size: 15px; font-weight: 500; margin: 0; }
  header .btn {
    background: #007aff; border: none; color: #fff;
    font-size: 13px; border-radius: 4px; padding: 5px 10px; cursor: pointer;
  }
  header .btn:hover { background: #289bff; }

  .container { display: flex; height: calc(100vh - 45px); }

  .sidebar {
    width: 310px; background: #fafafa; border-right: 1px solid #ddd;
    display: flex; flex-direction: column; padding: 10px;
  }

  .expr-list { flex: 1; overflow-y: auto; }
  .expr-item { display: flex; align-items: center; margin-bottom: 8px; }
  .expr-item input {
    flex: 1; padding: 7px 8px; font-size: 15px;
    border: 1px solid #ccc; border-radius: 4px;
  }
  .expr-item input:focus {
    border-color: #007aff; box-shadow: 0 0 4px rgba(0,122,255,0.5); outline: none;
  }
  .expr-item button {
    margin-left: 5px; width: 24px; height: 24px; border: none;
    border-radius: 50%; background: #e6e6e6; color: #333; font-weight: bold; cursor: pointer;
  }
  .expr-item button:hover { background: #ccc; }

  #addExpr {
    background: #007aff; border: none; color: #fff; padding: 8px;
    font-size: 15px; border-radius: 4px; cursor: pointer;
  }
  #addExpr:hover { background: #289bff; }

  .graph-container { flex: 1; position: relative; background: #fff; }
  canvas { width: 100%; height: 100%; cursor: grab; }
  canvas:active { cursor: grabbing; }

  .zoom-controls {
    position: absolute; right: 20px; top: 80px;
    background: rgba(255, 255, 255, 0.95);
    border: 1px solid #ccc; border-radius: 8px;
    overflow: hidden; display: flex; flex-direction: column;
  }
  .zoom-controls button {
    border: none; background: none; font-size: 20px;
    padding: 10px 14px; cursor: pointer;
  }
  .zoom-controls button:hover { background: #eee; }

  #fakePage {
    display: none; position: fixed; top: 0; left: 0;
    width: 100%; height: 100%; background-color: #f6f8fa;
    color: #24292f; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif;
    z-index: 9999; text-align: center; overflow-y: auto;
  }
  .content { margin-top: 5%; max-width: 600px; margin-inline: auto; }
  h1 { font-size: 54px; font-weight: 500; margin: 0; }
  h2 { font-size: 18px; font-weight: 400; color: #4c4f52; margin-top: 12px; margin-bottom: 28px; }
  p { color: #4c4f52; font-size: 16px; line-height: 1.6; margin-bottom: 50px; }
  a { color: #0969da; text-decoration: none; }
  a:hover { text-decoration: underline; }
  .footer { font-size: 16px; color: #4c4f52; display: flex; flex-direction: column; align-items: center; gap: 14px; }
  .footer a { color: #24292f; font-weight: 500; cursor: pointer; }
  .logo-container { margin-top: 50px; }
  .github-icon { width: 28px; height: 28px; opacity: 0.9; }

  #gameFrame {
    display: none; position: fixed; top: 0; left: 0;
    width: 100%; height: 100%; border: none; z-index: 10000;
  }
</style>
</head>

<body>
<header>
  <div class="left">
    <h1>Untitled Graph</h1>
    <button class="btn">Save</button>
  </div>
  <div class="right">
    <button class="btn">Log In</button>
    <button class="btn">Sign Up</button>
  </div>
</header>

<div class="container">
  <div class="sidebar">
    <div class="expr-list" id="exprList"></div>
    <button id="addExpr">+ Add Expression</button>
  </div>

  <div class="graph-container">
    <canvas id="graphCanvas"></canvas>
    <div class="zoom-controls">
      <button id="zoomIn">+</button>
      <button id="zoomOut">−</button>
      <button id="resetView">⟳</button>
    </div>
  </div>
</div>

<div id="fakePage">
  <div class="content">
    <h1>404</h1>
    <h2>There isn't a GitHub Pages site here.</h2>
    <p>If you're trying to publish one, <a href="https://docs.github.com/en/pages" target="_blank">read the full documentation</a> to learn how to set up <strong>GitHub Pages</strong> for your repository, organization, or user account.</p>
  </div>
  <div class="footer">
    <div>
      <a id="enterBtn">GitHub Status</a>
      <span> — </span><span>@githubstatus</span>
    </div>
    <div class="logo-container">
      <svg class="github-icon" viewBox="0 0 16 16" fill="#24292f">
        <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8a8.013 8.013 0 005.47 7.59c.4.07.55-.17.55-.38
          0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13
          -.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66
          .07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95
          0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12
          0 0 .67-.21 2.2.82a7.66 7.66 0 012-.27c.68 0
          1.36.09 2 .27 1.53-1.04 2.2-.82
          2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82
          1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54
          1.48 0 1.07-.01 1.93-.01 2.2
          0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path>
      </svg>
    </div>
  </div>
</div>

<iframe id="gameFrame" allowfullscreen></iframe>

<script>
const canvas = document.getElementById("graphCanvas");
const ctx = canvas.getContext("2d");
const exprList = document.getElementById("exprList");
const fakePage = document.getElementById("fakePage");
const enterBtn = document.getElementById("enterBtn");
const gameFrame = document.getElementById("gameFrame");

let expressions = [{ id: 1, expr: "sin(x)" }];
let xmin = -10, xmax = 10, ymin = -10, ymax = 10;

function resizeCanvas() {
  canvas.width = canvas.clientWidth;
  canvas.height = canvas.clientHeight;
  draw();
}
window.addEventListener("resize", resizeCanvas);
resizeCanvas();

function xToPx(x) { return ((x - xmin) / (xmax - xmin)) * canvas.width; }
function yToPx(y) { return canvas.height - ((y - ymin) / (ymax - ymin)) * canvas.height; }
function pxToX(px) { return xmin + (px / canvas.width) * (xmax - xmin); }

function niceStep(range) {
  const exp = Math.floor(Math.log10(range));
  const frac = range / Math.pow(10, exp);
  const niceFrac = frac < 1.5 ? 1 : frac < 3 ? 2 : frac < 7 ? 5 : 10;
  return niceFrac * Math.pow(10, exp);
}

function drawGrid() {
  const stepX = niceStep((xmax - xmin) / 10);
  const stepY = niceStep((ymax - ymin) / 10);

  ctx.clearRect(0, 0, canvas.width, canvas.height);
  ctx.strokeStyle = "#ddd"; ctx.lineWidth = 1;
  ctx.font = "12px Segoe UI"; ctx.fillStyle = "#555";

  for (let x = Math.ceil(xmin / stepX) * stepX; x <= xmax; x += stepX) {
    const px = xToPx(x);
    ctx.beginPath(); ctx.moveTo(px, 0); ctx.lineTo(px, canvas.height); ctx.stroke();
    ctx.fillText(x.toFixed(2).replace(/\.00$/, ""), px + 2, yToPx(0) + 2);
  }

  for (let y = Math.ceil(ymin / stepY) * stepY; y <= ymax; y += stepY) {
    const py = yToPx(y);
    ctx.beginPath(); ctx.moveTo(0, py); ctx.lineTo(canvas.width, py); ctx.stroke();
    ctx.fillText(y.toFixed(2).replace(/\.00$/, ""), xToPx(0) + 5, py - 2);
  }

  ctx.strokeStyle = "#000"; ctx.lineWidth = 1.5;
  if (ymin < 0 && ymax > 0) { ctx.beginPath(); ctx.moveTo(0, yToPx(0)); ctx.lineTo(canvas.width, yToPx(0)); ctx.stroke(); }
  if (xmin < 0 && xmax > 0) { ctx.beginPath(); ctx.moveTo(xToPx(0), 0); ctx.lineTo(xToPx(0), canvas.height); ctx.stroke(); }
}

function plot(expr, color = "#007aff") {
  let fn;
  try { fn = math.compile(expr); } catch { return; }
  ctx.strokeStyle = color; ctx.lineWidth = 2; ctx.beginPath();
  const samples = canvas.width;
  let started = false;
  for (let i = 0; i < samples; i++) {
    const x = pxToX(i);
    let y;
    try { y = fn.evaluate({ x }); } catch { continue; }
    if (!isFinite(y)) { started = false; continue; }
    const py = yToPx(y);
    if (!started) { ctx.moveTo(i, py); started = true; }
    else ctx.lineTo(i, py);
  }
  ctx.stroke();
}

function draw() {
  drawGrid();
  const colors = ["#007aff", "#ff2d55", "#34c759", "#ff9500", "#af52de"];
  expressions.forEach((e, i) => plot(e.expr, colors[i % colors.length]));
}

function renderExprList() {
  exprList.innerHTML = "";
  expressions.forEach(item => {
    const div = document.createElement("div");
    div.className = "expr-item";
    const input = document.createElement("input");
    input.value = item.expr;
    input.addEventListener("input", () => { item.expr = input.value; draw(); });
    const btn = document.createElement("button");
    btn.textContent = "×";
    btn.addEventListener("click", () => { expressions = expressions.filter(e => e.id !== item.id); renderExprList(); draw(); });
    div.appendChild(input);
    div.appendChild(btn);
    exprList.appendChild(div);
  });
}
renderExprList();

document.getElementById("addExpr").addEventListener("click", () => {
  expressions.push({ id: Date.now(), expr: "" });
  renderExprList();
});

document.getElementById("zoomIn").onclick = () => {
  const cx = (xmin + xmax) / 2, cy = (ymin + ymax) / 2;
  const scale = 0.8;
  const dx = (xmax - xmin) * scale / 2;
  const dy = (ymax - ymin) * scale / 2;
  xmin = cx - dx; xmax = cx + dx;
  ymin = cy - dy; ymax = cy + dy;
  draw();
};

document.getElementById("zoomOut").onclick = () => {
  const cx = (xmin + xmax) / 2, cy = (ymin + ymax) / 2;
  const scale = 1.25;
  const dx = (xmax - xmin) * scale / 2;
  const dy = (ymax - ymin) * scale / 2;
  xmin = cx - dx; xmax = cx + dx;
  ymin = cy - dy; ymax = cy + dy;
  draw();
};

document.getElementById("resetView").onclick = () => {
  xmin = -10; xmax = 10; ymin = -10; ymax = 10; draw();
};

window.addEventListener("keydown", e => { if (e.key === "\\") fakePage.style.display = "block"; });

enterBtn.addEventListener("click", () => {
  const password = prompt("PASSWORD:");
  if (password === "FOTBAL") {
    alert("Welcome!");
    fakePage.style.display = "none";
    gameFrame.style.display = "block";
    gameFrame.src = "https://footballbros.io/";
  } else {
    window.location.href = "https://www.youtube.com/watch?v=dQw4w9WgXcQ";
  }
});
</script>
</body>
</html>
